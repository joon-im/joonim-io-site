<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.75.1" />


<title>Tidy Forecasting: How to Visualize Time Series - Joon&#39;s Blog</title>
<meta property="og:title" content="Tidy Forecasting: How to Visualize Time Series - Joon&#39;s Blog">


  <link href='/favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/joon-im">GitHub</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">3 min read</span>
    

    <h1 class="article-title">Tidy Forecasting: How to Visualize Time Series</h1>

    
    <span class="article-date">2020-10-10</span>
    

    <div class="article-content">
      


<div id="set-up" class="section level1">
<h1>1. Set Up</h1>
<div id="introduction" class="section level3">
<h3>1.1 Introduction</h3>
<p>There are a number of forecasting packages written in R to choose from, each with their own pros and cons.</p>
<p>For almost a decade, the <code>forecast</code> library from the <code>fpp2</code> forecasting framework has been a major force in the time series world. However, within the last year or so an official update has been released. This new <code>fpp3</code> framework utilizes a package called <code>fable</code> that follows tidy methodology as opposed to using base R code.</p>
<p>More recently, the <code>modeltime</code> library has been released and this also follows tidy methods. It has a companion package <code>timetk</code> for data manipulation and visualization which is also written by the same author.</p>
<p>The following is a code comparison of various time series visualizations between these frameworks: <code>fpp2</code>, <code>fpp3</code> and <code>timetk/modeltime</code>.</p>
<p>Before we start, keep a few things in mind:</p>
<ul>
<li>Only the essential code has been provided</li>
<li>Non-essential code such as plot titles and themes has been excluded</li>
<li>All plots utilize the Business Science ggplot theme</li>
</ul>
</div>
<div id="load-libraries" class="section level3">
<h3>1.2 Load Libraries</h3>
<pre class="r"><code># Load libraries
library(fpp2)         # The OG of forecasting
library(fpp3)         # Official update to fpp2
library(timetk)       # Companion to modeltime
library(tidyverse)    # Data manipulation tools
library(cowplot)      # Add-on for arranging plots</code></pre>
</div>
</div>
<div id="ts-vs-tsibble-vs-tibble" class="section level1">
<h1>2. ts vs tsibble vs tibble</h1>
<ul>
<li>The base ts object is used by <code>forecast</code> &amp; <code>fpp2</code></li>
<li>The special <code>tsibble</code> object is used by <code>fable</code> &amp; <code>fpp3</code></li>
<li>The standard <code>tibble</code> object is used by <code>timetk</code> &amp; <code>modeltime</code></li>
</ul>
<div id="load-time-series-data" class="section level3">
<h3>2.1 Load Time Series Data</h3>
<p>For the next few visualizations, we will utilize a dataset containing quarterly production values of certain commodities in Australia.</p>
<pre class="r"><code># Quarterly Australian production data as tibble
aus &lt;- tsibbledata::aus_production %&gt;% as_tibble()

# Check structure
aus %&gt;% str()
## tibble [218 Ã— 7] (S3: tbl_df/tbl/data.frame)
##  $ Quarter    : qtr [1:218] 1956 Q1, 1956 Q2, 1956 Q3, 1956 Q4, 1957 Q1, 1957 Q2, 1957...
##  $ Beer       : num [1:218] 284 213 227 308 262 228 236 320 272 233 ...
##  $ Tobacco    : num [1:218] 5225 5178 5297 5681 5577 ...
##  $ Bricks     : num [1:218] 189 204 208 197 187 214 227 222 199 229 ...
##  $ Cement     : num [1:218] 465 532 561 570 529 604 603 582 554 620 ...
##  $ Electricity: num [1:218] 3923 4436 4806 4418 4339 ...
##  $ Gas        : num [1:218] 5 6 7 6 5 7 7 6 5 7 ...</code></pre>
<p><em>Always check the class of your time series data.</em></p>
</div>
</div>
<div id="including-plots" class="section level1">
<h1>Including Plots</h1>
<p>You can also embed plots. See Figure <a href="#fig:pie">1</a> for example:</p>
<pre class="r"><code>par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&#39;Sky&#39;, &#39;Sunny side of pyramid&#39;, &#39;Shady side of pyramid&#39;),
  col = c(&#39;#0292D8&#39;, &#39;#F7EA39&#39;, &#39;#C4B632&#39;),
  init.angle = -50, border = NA
)</code></pre>
<div class="figure"><span id="fig:pie"></span>
<img src="/post/2020-10-10-r-rmarkdown_files/figure-html/pie-1.png" alt="A fancy pie chart." width="672" />
<p class="caption">
Figure 1: A fancy pie chart.
</p>
</div>
</div>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

