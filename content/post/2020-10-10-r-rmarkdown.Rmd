---
title: "Tidy Forecasting: How to Visualize Time Series"
author: "Joon Im"
date: 2020-10-10
categories: ["R"]
tags: ["R", "tidyverse", "time Series", "modeltime", "fpp2", "fpp3", "forecast","fable"]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE)
```

# 1. Set Up

### 1.1 Introduction

There are a number of forecasting packages written in R to choose from, each with their own pros and cons.

For almost a decade, the `forecast` library from the `fpp2` forecasting framework has been a major force in the time series world. However, within the last year or so an official update has been released. This new `fpp3` framework utilizes a package called `fable` that follows tidy methodology as opposed to using base R code. 

More recently, the `modeltime` library has been released and this also follows tidy methods. It has a companion package `timetk` for data manipulation and visualization which is also written by the same author.

The following is a code comparison of various time series visualizations between these frameworks: `fpp2`, `fpp3` and `timetk/modeltime`.

Before we start, keep a few things in mind:

- Only the essential code has been provided
- Non-essential code such as plot titles and themes has been excluded
- All plots utilize the Business Science ggplot theme

### 1.2 Load Libraries

```{r libraries, message=FALSE, warning=FALSE}
# Load libraries
library(fpp2)         # The OG of forecasting
library(fpp3)         # Official update to fpp2
library(timetk)       # Companion to modeltime
library(tidyverse)    # Data manipulation tools
library(cowplot)      # Add-on for arranging plots
```

# 2. ts vs tsibble vs tibble

- The base ts object is used by `forecast` & `fpp2`
- The special `tsibble` object is used by `fable` & `fpp3`
- The standard `tibble` object is used by `timetk` & `modeltime`

### 2.1 Load Time Series Data

For the next few visualizations, we will utilize a dataset containing quarterly production values of certain commodities in Australia.

```{r load data, tidy=TRUE}
# Quarterly Australian production data as tibble
aus <- tsibbledata::aus_production %>% as_tibble()

# Check structure
aus %>% str()
```

*Always check the class of your time series data.*









# Including Plots

You can also embed plots. See Figure \@ref(fig:pie) for example:

```{r pie, fig.cap='A fancy pie chart.', tidy=FALSE}
par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c('Sky', 'Sunny side of pyramid', 'Shady side of pyramid'),
  col = c('#0292D8', '#F7EA39', '#C4B632'),
  init.angle = -50, border = NA
)
```
